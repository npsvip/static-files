/**
 * bootstrap-paginator.js v0.5
 * --
 * Copyright 2013 Yun Lai <lyonlai1984@gmail.com>
 * --
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(f){var k=function(a,b){this.init(a,b)};k.prototype={init:function(a,b){this.$element=f(a);var c=b&&b.bootstrapMajorVersion?b.bootstrapMajorVersion:f.fn.bootstrapPaginator.defaults.bootstrapMajorVersion;this.$element.attr("id");if(2===c&&!this.$element.is("div"))throw"in Bootstrap version 2 the pagination must be a div element. Or if you are using Bootstrap pagination 3. Please specify it in bootstrapMajorVersion in the option";if(2<c&&!this.$element.is("ul"))throw"in Bootstrap version 3 the pagination root item must be an ul element.";this.lastPage=this.currentPage=1;this.setOptions(b);this.initialized=!0},setOptions:function(a){this.options=f.extend({},this.options||f.fn.bootstrapPaginator.defaults,a);this.totalPages=parseInt(this.options.totalPages,10);this.numberOfPages=parseInt(this.options.numberOfPages,10);a&&"undefined"!==typeof a.currentPage&&this.setCurrentPage(a.currentPage);this.listen();this.render();this.initialized||this.lastPage===this.currentPage||this.$element.trigger("page-changed",[this.lastPage,this.currentPage])},listen:function(){this.$element.off("page-clicked");this.$element.off("page-changed");"function"===typeof this.options.onPageClicked&&this.$element.bind("page-clicked",this.options.onPageClicked);if("function"===typeof this.options.onPageChanged)this.$element.on("page-changed",this.options.onPageChanged);this.$element.bind("page-clicked",this.onPageClicked)},destroy:function(){this.$element.off("page-clicked");this.$element.off("page-changed");this.$element.removeData("bootstrapPaginator");this.$element.empty()},show:function(a){this.setCurrentPage(a);this.render();this.lastPage!==this.currentPage&&this.$element.trigger("page-changed",[this.lastPage,this.currentPage])},showNext:function(){var a=this.getPages();a.next&&this.show(a.next)},showPrevious:function(){var a=this.getPages();a.prev&&this.show(a.prev)},showFirst:function(){var a=this.getPages();a.first&&this.show(a.first)},showLast:function(){var a=this.getPages();a.last&&this.show(a.last)},onPageItemClicked:function(a){this.$element.trigger("page-clicked",[a,a.data.type,a.data.page])},onPageClicked:function(a,b,c,d){a=f(a.currentTarget);switch(c){case "first":a.bootstrapPaginator("showFirst");break;case "prev":a.bootstrapPaginator("showPrevious");break;case "next":a.bootstrapPaginator("showNext");break;case "last":a.bootstrapPaginator("showLast");break;case "page":a.bootstrapPaginator("show",d)}},render:function(){var a=this.getValueFromOption(this.options.containerClass,this.$element),b=this.options.size||"normal",c=this.options.alignment||"left",d=this.getPages(),e=2===this.options.bootstrapMajorVersion?f("\x3cul\x3e\x3c/ul\x3e"):this.$element,g=2===this.options.bootstrapMajorVersion?this.getValueFromOption(this.options.listContainerClass,e):null;this.$element.prop("class","");this.$element.addClass("pagination");switch(b.toLowerCase()){case "large":case "small":case "mini":this.$element.addClass(f.fn.bootstrapPaginator.sizeArray[this.options.bootstrapMajorVersion][b.toLowerCase()])}if(2===this.options.bootstrapMajorVersion)switch(c.toLowerCase()){case "center":this.$element.addClass("pagination-centered");break;case "right":this.$element.addClass("pagination-right")}this.$element.addClass(a);this.$element.empty();2===this.options.bootstrapMajorVersion&&(this.$element.append(e),e.addClass(g));this.pageRef=[];d.first&&(a=this.buildPageItem("first",d.first))&&e.append(a);d.prev&&(a=this.buildPageItem("prev",d.prev))&&e.append(a);for(b=0;b<d.length;b+=1)(a=this.buildPageItem("page",d[b]))&&e.append(a);d.next&&(a=this.buildPageItem("next",d.next))&&e.append(a);d.last&&(d=this.buildPageItem("last",d.last))&&e.append(d)},buildPageItem:function(a,b){var c=f("\x3cli\x3e\x3c/li\x3e"),d=f("\x3ca\x3e\x3c/a\x3e"),e="",g="",h=this.options.itemContainerClass(a,b,this.currentPage),k=this.getValueFromOption(this.options.itemContentClass,a,b,this.currentPage);switch(a){case "first":if(!this.getValueFromOption(this.options.shouldShowPage,a,b,this.currentPage))return;e=this.options.itemTexts(a,b,this.currentPage);g=this.options.tooltipTitles(a,b,this.currentPage);break;case "last":if(!this.getValueFromOption(this.options.shouldShowPage,a,b,this.currentPage))return;e=this.options.itemTexts(a,b,this.currentPage);g=this.options.tooltipTitles(a,b,this.currentPage);break;case "prev":if(!this.getValueFromOption(this.options.shouldShowPage,a,b,this.currentPage))return;e=this.options.itemTexts(a,b,this.currentPage);g=this.options.tooltipTitles(a,b,this.currentPage);break;case "next":if(!this.getValueFromOption(this.options.shouldShowPage,a,b,this.currentPage))return;e=this.options.itemTexts(a,b,this.currentPage);g=this.options.tooltipTitles(a,b,this.currentPage);break;case "page":if(!this.getValueFromOption(this.options.shouldShowPage,a,b,this.currentPage))return;e=this.options.itemTexts(a,b,this.currentPage);g=this.options.tooltipTitles(a,b,this.currentPage)}c.addClass(h).append(d);d.addClass(k).html(e).on("click",null,{type:a,page:b},f.proxy(this.onPageItemClicked,this));this.options.pageUrl&&d.attr("href",this.getValueFromOption(this.options.pageUrl,a,b,this.currentPage));this.options.useBootstrapTooltip?(e=f.extend({},this.options.bootstrapTooltipOptions,{title:g}),d.tooltip(e)):d.attr("title",g);return c},setCurrentPage:function(a){if(a>this.totalPages||1>a)throw"Page out of range";this.lastPage=this.currentPage;this.currentPage=parseInt(a,10)},getPages:function(){var a=this.totalPages,b=0===this.currentPage%this.numberOfPages?(parseInt(this.currentPage/this.numberOfPages,10)-1)*this.numberOfPages+1:parseInt(this.currentPage/this.numberOfPages,10)*this.numberOfPages+1,c=[],d,b=1>b?1:b;for(d=0;d<this.numberOfPages&&b<=a;b+=1,d+=1)c.push(b);c.first=1;c.prev=1<this.currentPage?this.currentPage-1:1;c.next=this.currentPage<a?this.currentPage+1:a;c.last=a;c.current=this.currentPage;c.total=a;c.numberOfPages=this.options.numberOfPages;return c},getValueFromOption:function(a){var b=Array.prototype.slice.call(arguments,1);return"function"===typeof a?a.apply(this,b):a}};f.fn.bootstrapPaginator=function(a){var b=arguments,c=null;f(this).each(function(d,e){var g=f(e),h=g.data("bootstrapPaginator"),g="object"!==typeof a?null:a;if(h)if("string"===typeof a)if(h[a])c=h[a].apply(h,Array.prototype.slice.call(b,1));else throw"Method "+a+" does not exist";else c=h.setOptions(a);else h=new k(this,g),g=f(h.$element),g.data("bootstrapPaginator",h)});return c};f.fn.bootstrapPaginator.sizeArray={2:{large:"pagination-large",small:"pagination-small",mini:"pagination-mini"},3:{large:"pagination-lg",small:"pagination-sm",mini:""}};f.fn.bootstrapPaginator.defaults={containerClass:"",size:"normal",alignment:"left",bootstrapMajorVersion:2,listContainerClass:"",itemContainerClass:function(a,b,c){return b===c?"active":""},itemContentClass:function(a,b,c){return""},currentPage:1,numberOfPages:5,totalPages:1,pageUrl:function(a,b,c){return null},onPageClicked:null,onPageChanged:null,useBootstrapTooltip:!1,shouldShowPage:function(a,b,c){b=!0;switch(a){case "first":b=1!==c;break;case "prev":b=1!==c;break;case "next":b=c!==this.totalPages;break;case "last":b=c!==this.totalPages;break;case "page":b=!0}return b},itemTexts:function(a,b,c){switch(a){case "first":return"\x26lt;\x26lt;";case "prev":return"\x26lt;";case "next":return"\x26gt;";case "last":return"\x26gt;\x26gt;";case "page":return b}},tooltipTitles:function(a,b,c){switch(a){case "first":return"Go to first page";case "prev":return"Go to previous page";case "next":return"Go to next page";case "last":return"Go to last page";case "page":return b===c?"Current page is "+b:"Go to page "+b}},bootstrapTooltipOptions:{animation:!0,html:!0,placement:"top",selector:!1,title:"",container:!1}};f.fn.bootstrapPaginator.Constructor=k})(window.jQuery);